<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/Patchouli/blog/rss.xml" title="Patchouli Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Patchouli/blog/atom.xml" title="Patchouli Blog Atom Feed"><title data-react-helmet="true">1.17 Upgrade Guide | Patchouli</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://vazkiimods.github.io/Patchouli/docs/upgrading/upgrade-guide-117"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="1.17 Upgrade Guide | Patchouli"><meta data-react-helmet="true" name="description" content="Several changes were made during the 1.17 update cycle to make Patchouli easier to maintain and resolve longstanding warts and bugs."><meta data-react-helmet="true" property="og:description" content="Several changes were made during the 1.17 update cycle to make Patchouli easier to maintain and resolve longstanding warts and bugs."><link data-react-helmet="true" rel="shortcut icon" href="/Patchouli/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://vazkiimods.github.io/Patchouli/docs/upgrading/upgrade-guide-117"><link data-react-helmet="true" rel="alternate" href="https://vazkiimods.github.io/Patchouli/docs/upgrading/upgrade-guide-117" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://vazkiimods.github.io/Patchouli/docs/upgrading/upgrade-guide-117" hreflang="x-default"><link rel="stylesheet" href="/Patchouli/assets/css/styles.55e5465b.css">
<link rel="preload" href="/Patchouli/assets/js/runtime~main.919f504c.js" as="script">
<link rel="preload" href="/Patchouli/assets/js/main.cbcd9cf4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Patchouli/"><img src="/Patchouli/img/logo.svg" alt="Patchouli Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Patchouli/img/logo.svg" alt="Patchouli Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Patchouli</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Patchouli/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/Patchouli/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VazkiiMods/Patchouli" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Patchouli/docs/intro">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Basics</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Advanced Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Upgrade Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Patchouli/docs/upgrading/upgrade-guide-117">1.17 Upgrade Guide</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>1.17 Upgrade Guide</h1></header><p>Several changes were made during the 1.17 update cycle to make Patchouli easier to maintain and resolve longstanding warts and bugs.</p><p>This page highlights some of the more major changes you may run into as a book author.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="fully-qualified-names"></a>Fully qualified names<a class="hash-link" href="#fully-qualified-names" title="Direct link to heading">#</a></h3><p>All IDs in Patchouli books must now be fully qualified with a namespace. This includes:</p><ul><li>Template component IDs</li><li>Page types</li><li>Page categories</li><li>Template IDs</li></ul><p>The built-in page types and template components provided by Patchouli have namespace
<code>patchouli</code>.</p><p><a href="https://github.com/VazkiiMods/Patchouli/commit/1ec2e4d6f0f74736a60b292f44c97db59f3eb82a#diff-e0281f985a32f2ce1812733801b9f87b4623c04184eadee5d6bca978d58300f3L2" target="_blank" rel="noopener noreferrer">This</a>
gives an example of migrating. Of course, if you are a modder, you will be using your own
mod-id to refer to your own categories, entries, and templates.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="resource-pack-based-books"></a>Resource Pack-based books<a class="hash-link" href="#resource-pack-based-books" title="Direct link to heading">#</a></h3><p>Books can now specify <code>use_resource_pack: true</code> in their book.json to have their contents
loaded through the resource system.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This now allows book contents to be overrideable with resource packs.</p></div></div><p>Despite residing in <code>assets</code> or <code>data</code>, Patchouli books have never loaded properly from
neither resourcepacks nor datapacks, and never responded to attempts to override them via
those two mechanisms. 1.17 includes the first steps towards resolving this. All book
content can now be loaded and overrided freely using resource packs. &quot;Book content&quot;
meaning everything <em>except</em> <code>book.json</code>, which must remain in the same place as it has
been from 1.14-1.16.</p><p>You opt in by specifying the above flag, and moving everything that isn&#x27;t your book json
from the <code>data</code> folder to <code>assets</code>.</p><p>An example of this migration being done can be seen
<a href="https://github.com/VazkiiMods/Botania/commit/3f6266ce88231660da3ff305977edcb2e813e8d6?w=1" target="_blank" rel="noopener noreferrer">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="convenience-recipe-type-for-books"></a>Convenience recipe type for books<a class="hash-link" href="#convenience-recipe-type-for-books" title="Direct link to heading">#</a></h3><p>Crafting recipes for Patchouli books can now be provided using the <code>patchouli:book_recipe</code> and <code>patchouli:shapeless_book_recipe</code> recipe types as a convenience, and to avoid issues related to lack of default support on Fabric for NBT recipe output. These recipes use the syntax based on vanilla <code>minecraft:crafting_shaped</code> and <code>minecraft:crafting_shapeless</code> types, replacing the <code>output</code> object with a <code>book</code> string set to the ID of the book.</p><p>For an example, see <a href="https://github.com/VazkiiMods/Patchouli/tree/63983afeec89bb254c3b9c506ffbd4bd17808d3e/src/main/resources/data/patchouli/recipes" target="_blank" rel="noopener noreferrer">the recipes for test books</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="projected-changes-in-118"></a>Projected Changes in 1.18<a class="hash-link" href="#projected-changes-in-118" title="Direct link to heading">#</a></h2><p>We plan to make the following changes in 1.18:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="remove-non-resource-pack-books"></a>Remove non-resource pack books<a class="hash-link" href="#remove-non-resource-pack-books" title="Direct link to heading">#</a></h3><p>Resource pack-based books are the future of Patchouli, and the old hardcoded classpath
loading system will be removed.</p><p>Support for the <code>.minecraft/patchouli_books</code> folder will also be removed, as shipping a
book with a modpack will become the same as shipping a resource pack.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="revamp-entire-book-authoring-syntax"></a>Revamp entire book authoring syntax<a class="hash-link" href="#revamp-entire-book-authoring-syntax" title="Direct link to heading">#</a></h3><p>JSON is not a suitable markup language. We will be exploring alternative markup languages
such as Apache Freemarker for book authoring.  This is not guaranteed to make it to 1.18,
it&#x27;s a long term refactor we want to do. It may not even be in Patchouli, but another
successor mod.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/VazkiiMods/Patchouli/edit/documentation/docs/upgrading/upgrade-guide-117.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Patchouli/docs/reference/entry-json"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Entry JSON Format</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fully-qualified-names" class="table-of-contents__link">Fully qualified names</a></li><li><a href="#resource-pack-based-books" class="table-of-contents__link">Resource Pack-based books</a></li><li><a href="#convenience-recipe-type-for-books" class="table-of-contents__link">Convenience recipe type for books</a></li><li><a href="#projected-changes-in-118" class="table-of-contents__link">Projected Changes in 1.18</a><ul><li><a href="#remove-non-resource-pack-books" class="table-of-contents__link">Remove non-resource pack books</a></li><li><a href="#revamp-entire-book-authoring-syntax" class="table-of-contents__link">Revamp entire book authoring syntax</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Patchouli/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/vazkii" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/VazkiiMods" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Patchouli/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/VazkiiMods/Patchouli" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Vazkii's Mods Developers. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Patchouli/assets/js/runtime~main.919f504c.js"></script>
<script src="/Patchouli/assets/js/main.cbcd9cf4.js"></script>
</body>
</html>